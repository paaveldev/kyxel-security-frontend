---
const baseUrl = import.meta.env.BASE_URL;
const plans = [
  {
    name: 'Starter',
    price: '$39',
    cadence: 'per month',
    description: 'Perfect for indie studios or staging clusters needing quick visibility.',
    perks: [
      'Up to 3 servers or containers',
      'Live attack timeline',
      '7-day log retention',
      'Community support',
    ],
    cta: { label: 'Get started', href: `${baseUrl}register` },
    highlighted: false,
  },
  {
    name: 'Pro',
    price: '$79',
    cadence: 'per month',
    description: 'Best for production workloads that need instant signal.',
    perks: [
      'Unlimited servers & agents',
      'Real-time alert routing',
      '30-day log retention',
      'Pager & Slack integrations',
      'Priority analyst support',
    ],
    cta: { label: 'Start Pro trial', href: `${baseUrl}register` },
    highlighted: true,
    badge: 'Most popular',
  },
  {
    name: 'Enterprise',
    price: 'Custom',
    cadence: 'annual agreements',
    description: 'For large networks, MSPs or regulated environments.',
    perks: [
      'Dedicated ingest region',
      'Unlimited retention',
      '24/7 incident desk',
      'On-prem sensor option',
      'Assigned customer engineer',
    ],
    cta: { label: 'Contact sales', href: `${baseUrl}contact` },
    highlighted: false,
  },
];
---

<section
  id="pricing"
  class="py-20 md:py-24 bg-gradient-to-b from-[#030417] via-[#030417] to-[#050b1a]"
>
  <div class="max-w-6xl mx-auto px-4 sm:px-6 text-center">
    <p class="section-eyebrow text-xs sm:text-sm text-[#01a1f7]">Pricing</p>
    <h2 class="section-heading mt-3 text-2xl sm:text-3xl md:text-4xl break-words">
      Transparent plans that grow with your attack surface
    </h2>
    <p class="mt-4 text-base sm:text-lg text-slate-300 max-w-3xl mx-auto break-words">
      Every plan includes the Kyxel Security console, agent updates, and automated threat intelligence feeds.
    </p>

    <div class="mt-12 grid gap-4 sm:gap-6 md:grid-cols-3">
      {plans.map((plan) => (
        <div
          class={`card-strong rounded-xl sm:rounded-2xl p-5 sm:p-8 flex flex-col text-left relative overflow-hidden w-full ${
            plan.highlighted
              ? 'ring-2 ring-[#01a1f7] shadow-[0_25px_80px_rgba(1,161,247,0.25)]'
              : 'ring-1 ring-white/5'
          }`}
        >
          {plan.badge && (
            <span
              class="absolute top-2 right-2 sm:top-4 sm:right-4 text-[0.65rem] sm:text-[0.75rem] uppercase tracking-[0.2em] sm:tracking-[0.3em] text-black bg-[#22b6ff] px-2 sm:px-4 py-1 sm:py-2 rounded-full font-extrabold shadow-lg border-2 border-[#01a1f7] animate-pop break-words"
              style="letter-spacing:0.1em;"
            >
              {plan.badge}
            </span>
          )}

          <div class="min-w-0">
            <p class="text-xs sm:text-sm uppercase tracking-[0.2em] sm:tracking-[0.3em] text-slate-400 break-words">
              {plan.name}
            </p>
            <div class="mt-3 flex items-baseline gap-2 flex-wrap">
              <span class="text-3xl sm:text-4xl font-bold text-white break-words">{plan.price}</span>
              <span class="text-xs sm:text-sm text-slate-400 break-words">{plan.cadence}</span>
            </div>
            <p class="mt-2 text-slate-300 text-xs sm:text-sm break-words">{plan.description}</p>
          </div>

          <ul class="mt-4 sm:mt-6 space-y-2 sm:space-y-3 text-xs sm:text-sm text-slate-200">
            {plan.perks.map((perk, i) => (
              <li class="flex items-start gap-2">
                {plan.name === 'Starter' && i === plan.perks.length - 1 ? (
                  <span
                    class="mt-0.5 sm:mt-1 inline-flex h-3.5 w-3.5 sm:h-4 sm:w-4 items-center justify-center rounded-full bg-[#01a1f7]/20 text-[#01a1f7] text-[0.55rem] sm:text-[0.6rem] font-bold flex-shrink-0"
                  >
                    ✗
                  </span>
                ) : (
                  <span
                    class="mt-0.5 sm:mt-1 inline-flex h-3.5 w-3.5 sm:h-4 sm:w-4 items-center justify-center rounded-full bg-[#01a1f7]/20 text-[#01a1f7] text-[0.55rem] sm:text-[0.6rem] flex-shrink-0"
                  >
                    ✓
                  </span>
                )}
                <span class="break-words flex-1">{perk}</span>
                {plan.name === 'Starter' && i === plan.perks.length - 1 && (
                  <span class="ml-2 text-[10px] sm:text-xs text-slate-400 break-words">
                    No verified support
                  </span>
                )}
              </li>
            ))}
            {plan.name === 'Starter' && (
              <li class="flex items-start gap-2">
                <span
                  class="mt-0.5 sm:mt-1 inline-flex h-3.5 w-3.5 sm:h-4 sm:w-4 items-center justify-center rounded-full bg-[#01a1f7]/20 text-[#01a1f7] text-[0.55rem] sm:text-[0.6rem] font-bold flex-shrink-0"
                >
                  ✗
                </span>
                <span class="break-words">No advanced analytics</span>
              </li>
            )}
          </ul>

          <a
            href={plan.cta.href}
            class={`mt-6 sm:mt-8 inline-flex justify-center rounded-full px-4 sm:px-5 py-2.5 sm:py-3 text-xs sm:text-sm font-semibold transition duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#01a1f7] whitespace-nowrap ${
              plan.highlighted
                ? 'bg-[#01a1f7] text-black hover:bg-[#59bff5] hover:scale-105'
                : 'border border-white/20 text-white hover:border-[#01a1f7] hover:scale-105'
            }`}
          >
            {plan.highlighted ? 'Get started with Pro plan' : plan.cta.label}
          </a>
        </div>
      ))}
    </div>
  </div>
</section>
