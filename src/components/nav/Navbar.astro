---
import logo from '../../public/logos/kyxelsecurity.png';
const baseUrl = import.meta.env.BASE_URL;
---

<nav class="site-header sticky top-0 z-50">
  <div class="header-beam"></div>
  <div class="bg-transparent">
    <div class="max-w-7xl mx-auto px-4 md:px-6">
      <div class="hidden md:flex items-center py-4 w-full">
        <div class="flex gap-10 flex-1 justify-end pr-20">
          <a
            href="#features"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('features'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            Features
          </a>
          <a
            href="#how-it-works"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('how-it-works'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            How it works
          </a>
          <a
            href="#pricing"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('pricing'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            Pricing
          </a>
        </div>

        <div class="flex-shrink-0 flex justify-center items-center">
          <a
            href={`${baseUrl}`}
            class="inline-flex items-center m-0 p-0"
            aria-label="Kyxel Security home"
            style="height:40px; width:70px;"
          >
            <img
              src={logo.src}
              width={logo.width}
              height={logo.height}
              alt="Kyxel Security"
              class="h-full w-full object-contain transform scale-[2] origin-center cursor-pointer transition-transform duration-200 hover:scale-[2.1] m-0 p-0"
              style="display:block;"
            />
          </a>
        </div>

        <div class="flex gap-10 flex-1 justify-start items-center pl-20">
          <a
            href={`${baseUrl}docs`}
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
          >
            Docs
          </a>
          <a
            href={`${baseUrl}pricing`}
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
          >
            Plans
          </a>
          <a
            href="#faq"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('faq'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            FAQ
          </a>
          <div class="flex gap-2 items-center">
            <a
              href={`${baseUrl}login`}
              class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            >
              Login
            </a>
            <a
              href={`${baseUrl}register`}
              class="px-5 py-2 text-black rounded-full font-semibold whitespace-nowrap transition hover:opacity-90 text-base"
              style="background-color: #01a1f7; letter-spacing: 0.08em; font-family: 'Inter', 'Poppins', Arial, sans-serif;"
            >
              REGISTER
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div class="flex md:hidden items-center py-2 gap-1.5 px-3 sm:px-4 max-w-7xl mx-auto">
      <a
        href={`${baseUrl}`}
        class="inline-flex items-center flex-shrink-0"
        aria-label="Kyxel Security home"
      >
        <img
          src={logo.src}
          width={logo.width}
          height={logo.height}
          alt="Kyxel Security"
          class="h-8 sm:h-10 w-auto object-contain cursor-pointer"
        />
      </a>
      <div class="flex items-center gap-2 sm:gap-2.5 flex-1 justify-end overflow-hidden min-w-0">
        <!-- PRICING, DOCS, FAQ y luego 3 puntos -->
        <a
          href="#pricing"
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-sm sm:text-base whitespace-nowrap flex-shrink-0"
          onclick="event.preventDefault(); document.getElementById('pricing').scrollIntoView({behavior: 'smooth'});"
        >
          PRICING
        </a>
        <a
          href={`${baseUrl}docs`}
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-sm sm:text-base whitespace-nowrap flex-shrink-0"
        >
          DOCS
        </a>
        <a
          href="#faq"
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-sm sm:text-base whitespace-nowrap flex-shrink-0"
          onclick="event.preventDefault(); document.getElementById('faq').scrollIntoView({behavior: 'smooth'});"
        >
          FAQ
        </a>
        <!-- Botón de menú hamburguesa (3 puntitos) -->
        <button
          id="mobile-menu-btn"
          class="p-1 sm:p-1.5 rounded focus:outline-none focus:ring-2 focus:ring-[#01a1f7] flex-shrink-0 ml-0.5"
          aria-label="Open menu"
        >
          <svg width="18" height="18" fill="none" viewBox="0 0 24 24" class="text-[#01a1f7] sm:w-5 sm:h-5">
            <circle cx="5" cy="5" r="1.5" fill="currentColor" />
            <circle cx="12" cy="5" r="1.5" fill="currentColor" />
            <circle cx="19" cy="5" r="1.5" fill="currentColor" />
            <circle cx="5" cy="12" r="1.5" fill="currentColor" />
            <circle cx="12" cy="12" r="1.5" fill="currentColor" />
            <circle cx="19" cy="12" r="1.5" fill="currentColor" />
            <circle cx="5" cy="19" r="1.5" fill="currentColor" />
            <circle cx="12" cy="19" r="1.5" fill="currentColor" />
            <circle cx="19" cy="19" r="1.5" fill="currentColor" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="w-full">
    <div class="h-px bg-white/10"></div>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu"
  class="fixed inset-0 bg-black/95 backdrop-blur-md z-[999] hidden md:hidden flex-col
         transition-all duration-300 ease-in-out opacity-0 pointer-events-none"
>
  <button
    id="close-menu"
    class="absolute top-4 right-4 p-3 rounded-full bg-white/10 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-[#01a1f7] transition-colors"
    aria-label="Close menu"
  >
    <svg width="24" height="24" fill="none" viewBox="0 0 24 24" class="text-[#01a1f7]">
      <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
      <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" />
    </svg>
  </button>

  <div class="flex flex-col justify-center items-center h-full px-6 py-20 overflow-y-auto">
    <nav class="flex flex-col gap-3 w-full max-w-sm">
      <!-- Todos los elementos del menú móvil -->
      <a
        href="#features"
        class="hover:text-[#01a1f7] text-slate-200 nav-text text-base sm:text-lg py-3 px-4 rounded-lg hover:bg-white/5 transition-colors text-center"
        onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); setTimeout(() => { const el=document.getElementById('features'); if(el){el.scrollIntoView({behavior:'smooth'});} }, 300); return false;"
      >
        Features
      </a>
      <a
        href="#how-it-works"
        class="hover:text-[#01a1f7] text-slate-200 nav-text text-base sm:text-lg py-3 px-4 rounded-lg hover:bg-white/5 transition-colors text-center"
        onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); setTimeout(() => { const el=document.getElementById('how-it-works'); if(el){el.scrollIntoView({behavior:'smooth'});} }, 300); return false;"
      >
        How it works
      </a>
      <a
        href="#pricing"
        class="hover:text-[#01a1f7] text-slate-200 nav-text text-base sm:text-lg py-3 px-4 rounded-lg hover:bg-white/5 transition-colors text-center"
        onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); setTimeout(() => { const el=document.getElementById('pricing'); if(el){el.scrollIntoView({behavior:'smooth'});} }, 300); return false;"
      >
        Pricing
      </a>
      <a
        href={`${baseUrl}docs`}
        class="hover:text-[#01a1f7] text-slate-200 nav-text text-base sm:text-lg py-3 px-4 rounded-lg hover:bg-white/5 transition-colors text-center"
        onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
      >
        Docs
      </a>
      <a
        href={`${baseUrl}pricing`}
        class="hover:text-[#01a1f7] text-slate-200 nav-text text-base sm:text-lg py-3 px-4 rounded-lg hover:bg-white/5 transition-colors text-center"
        onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
      >
        Plans
      </a>
      <a
        href="#faq"
        class="hover:text-[#01a1f7] text-slate-200 nav-text text-base sm:text-lg py-3 px-4 rounded-lg hover:bg-white/5 transition-colors text-center"
        onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); setTimeout(() => { const el=document.getElementById('faq'); if(el){el.scrollIntoView({behavior:'smooth'});} }, 300); return false;"
      >
        FAQ
      </a>
      
      <div class="border-t border-white/10 my-2"></div>
      
      <!-- Botones de acción -->
      <a
        href={`${baseUrl}login`}
        class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-full font-semibold text-center transition-colors border border-white/20 text-sm sm:text-base"
        onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
      >
        Login
      </a>
      <a
        href={`${baseUrl}register`}
        class="px-6 py-3 bg-[#01a1f7] hover:bg-[#01b0ff] text-black rounded-full font-semibold text-center transition-colors text-sm sm:text-base"
        onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
      >
        Register
      </a>
    </nav>
  </div>
</div>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const closeMenu = document.getElementById('close-menu');

  function openMenu() {
    if (!mobileMenu) return;
    mobileMenu.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
    mobileMenu.classList.add('flex', 'opacity-100', 'pointer-events-auto');
    document.body.style.overflow = 'hidden';
  }

  function closeMenuFn() {
    if (!mobileMenu) return;
    mobileMenu.classList.remove('opacity-100', 'pointer-events-auto');
    mobileMenu.classList.add('opacity-0', 'pointer-events-none');
    setTimeout(() => {
      mobileMenu.classList.add('hidden');
      mobileMenu.classList.remove('flex');
      document.body.style.overflow = '';
    }, 300);
  }

  if (menuBtn) {
    menuBtn.addEventListener('click', openMenu);
  }
  
  if (closeMenu) {
    closeMenu.addEventListener('click', closeMenuFn);
  }

  // Cerrar menú cuando se navega con los links
  window.addEventListener('close-mobile-menu', closeMenuFn);
  
  // Cerrar menú al hacer clic fuera del contenido
  if (mobileMenu) {
    mobileMenu.addEventListener('click', (e) => {
      if (e.target === mobileMenu) {
        closeMenuFn();
      }
    });
  }
</script>
