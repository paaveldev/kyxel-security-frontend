---
import logo from '../../public/logos/kyxelsecurity.png';
const baseUrl = import.meta.env.BASE_URL;
---

<nav class="site-header sticky top-0 z-50">
  <div class="header-beam"></div>
  <div class="bg-transparent">
    <div class="max-w-7xl mx-auto px-4 md:px-6">
      <!-- Desktop nav -->
      <div class="hidden md:flex items-center py-4 w-full">
        <!-- Contenedor izquierdo -->
        <div class="flex gap-10 flex-1 justify-end pr-20">
          <a
            href="#features"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('features'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            Features
          </a>
          <a
            href="#how-it-works"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('how-it-works'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            How it works
          </a>
          <a
            href="#pricing"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('pricing'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            Pricing
          </a>
        </div>

        <!-- Logo centrado -->
        <div class="flex-shrink-0 flex justify-center items-center">
          <a
            href={`${baseUrl}`}
            class="inline-flex items-center m-0 p-0"
            aria-label="Kyxel Security home"
            style="height:40px; width:70px;"
          >
            <img
              src={logo.src}
              width={logo.width}
              height={logo.height}
              alt="Kyxel Security"
              class="h-full w-full object-contain transform scale-[2] origin-center cursor-pointer transition-transform duration-200 hover:scale-[2.1] m-0 p-0"
              style="display:block;"
            />
          </a>
        </div>

        <!-- Contenedor derecho -->
        <div class="flex gap-10 flex-1 justify-start items-center pl-20">
          <a
            href={`${baseUrl}docs`}
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
          >
            Docs
          </a>
          <a
            href={`${baseUrl}pricing`}
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
          >
            Plans
          </a>
          <a
            href="#faq"
            class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            onclick="event.preventDefault(); const el=document.getElementById('faq'); if(el){el.scrollIntoView({behavior:'smooth'}); setTimeout(()=>{window.scrollBy({top:-window.innerHeight/2+el.getBoundingClientRect().height/2,behavior:'smooth'});},400);} return false;"
          >
            FAQ
          </a>
          <div class="flex gap-2 items-center">
            <a
              href={`${baseUrl}login`}
              class="hover:text-[#01a1f7] whitespace-nowrap text-base nav-text"
            >
              Login
            </a>
            <a
              href={`${baseUrl}register`}
              class="px-5 py-2 text-black rounded-full font-semibold whitespace-nowrap transition hover:opacity-90 text-base"
              style="background-color: #01a1f7; letter-spacing: 0.08em; font-family: 'Inter', 'Poppins', Arial, sans-serif;"
            >
              REGISTER
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile nav (solo barra superior) -->
    <div class="flex md:hidden items-center py-2 gap-2 px-4 md:px-6 max-w-7xl mx-auto">
      <a
        href={`${baseUrl}`}
        class="inline-flex items-center flex-shrink-0"
        aria-label="Kyxel Security home"
      >
        <img
          src={logo.src}
          width={logo.width}
          height={logo.height}
          alt="Kyxel Security"
          class="h-16 w-auto object-contain cursor-pointer"
        />
      </a>
      <div class="flex items-center gap-4 flex-1 justify-end">
        <a
          href="#features"
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-xl"
          onclick="event.preventDefault(); document.getElementById('features').scrollIntoView({behavior: 'smooth'});"
        >
          Features
        </a>
        <a
          href="#how-it-works"
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-xl"
          onclick="event.preventDefault(); document.getElementById('how-it-works').scrollIntoView({behavior: 'smooth'});"
        >
          How it works
        </a>
        <a
          href="#pricing"
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-xl"
          onclick="event.preventDefault(); document.getElementById('pricing').scrollIntoView({behavior: 'smooth'});"
        >
          Pricing
        </a>
        <a
          href={`${baseUrl}docs`}
          class="hover:text-[#01a1f7] text-slate-300 nav-text text-xl"
        >
          Docs
        </a>
        <button
          id="mobile-menu-btn"
          class="p-2 rounded focus:outline-none focus:ring-2 focus:ring-[#01a1f7]"
        >
          <svg width="32" height="32" fill="none" viewBox="0 0 32 32">
            <rect y="7" width="32" height="3" rx="1.5" fill="#01a1f7" />
            <rect y="14" width="32" height="3" rx="1.5" fill="#01a1f7" />
            <rect y="21" width="32" height="3" rx="1.5" fill="#01a1f7" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Divider bajo nav -->
  <div class="w-full">
    <div class="h-px bg-white/10"></div>
  </div>
</nav>

<!-- Mobile menu overlay FUERA del nav para que sí ocupe toda la pantalla -->
<div
  id="mobile-menu"
  class="fixed inset-0 bg-black/90 z-[999] hidden md:hidden flex-col justify-center items-center
         transition-transform duration-300 ease-in-out translate-x-full"
>
  <button
    id="close-menu"
    class="absolute top-6 right-6 p-2 rounded focus:outline-none focus:ring-2 focus:ring-[#01a1f7]"
  >
    <svg width="32" height="32" fill="none" viewBox="0 0 32 32">
      <line x1="8" y1="8" x2="24" y2="24" stroke="#01a1f7" stroke-width="3" stroke-linecap="round" />
      <line x1="24" y1="8" x2="8" y2="24" stroke="#01a1f7" stroke-width="3" stroke-linecap="round" />
    </svg>
  </button>

  <nav class="flex flex-col gap-6 text-xl text-slate-100 nav-text items-center mt-12">
    <a
      href="#features"
      class="hover:text-[#01a1f7]"
      onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); const el=document.getElementById('features'); if(el){el.scrollIntoView({behavior:'smooth'});} return false;"
    >
      Features
    </a>
    <a
      href="#how-it-works"
      class="hover:text-[#01a1f7]"
      onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); const el=document.getElementById('how-it-works'); if(el){el.scrollIntoView({behavior:'smooth'});} return false;"
    >
      How it works
    </a>
    <a
      href="#pricing"
      class="hover:text-[#01a1f7]"
      onclick="event.preventDefault(); window.dispatchEvent(new Event('close-mobile-menu')); const el=document.getElementById('pricing'); if(el){el.scrollIntoView({behavior:'smooth'});} return false;"
    >
      Pricing
    </a>
    <a
      href="#faq"
      class="hover:text-[#01a1f7]"
      onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
    >
      FAQ
    </a>
    <a
      href={`${baseUrl}docs`}
      class="hover:text-[#01a1f7]"
      onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
    >
      Docs
    </a>
    <a
      href={`${baseUrl}login`}
      class="px-6 py-3 bg-[#01a1f7] text-black rounded-full font-display tracking-nav"
      onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
    >
      Login
    </a>
    <a
      href={`${baseUrl}register`}
      class="px-6 py-3 bg-[#01a1f7] text-black rounded-full font-display tracking-nav"
      onclick="window.dispatchEvent(new Event('close-mobile-menu'))"
    >
      Register
    </a>
  </nav>
</div>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const closeMenu = document.getElementById('close-menu');

  function openMenu() {
    if (!mobileMenu) return;
    mobileMenu.classList.remove('hidden', 'translate-x-full');
    mobileMenu.classList.add('flex', 'translate-x-0');
    document.body.style.overflow = 'hidden';
  }

  function closeMenuFn() {
    if (!mobileMenu) return;
    mobileMenu.classList.remove('translate-x-0');
    mobileMenu.classList.add('translate-x-full');
    setTimeout(() => {
      mobileMenu.classList.add('hidden');
      mobileMenu.classList.remove('flex');
      document.body.style.overflow = '';
    }, 300);
  }

  menuBtn && menuBtn.addEventListener('click', openMenu);
  closeMenu && closeMenu.addEventListener('click', closeMenuFn);

  // cerrar menú cuando se navega con los links del overlay (evento custom opcional)
  window.addEventListener('close-mobile-menu', closeMenuFn);
</script>
